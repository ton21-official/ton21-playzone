<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>T21 Play Zone</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #0b0f16;
      color: #f5f5f5;
      text-align: center;
      margin: 0;
      padding: 20px;
    }
    h2 { color: #ffdf88; }
    select, input, button {
      margin: 8px auto;
      border: none;
      border-radius: 6px;
      padding: 10px 16px;
      font-size: 16px;
      display: block;
    }
    select, input {
      background: #111724;
      color: #fff;
      text-align: center;
      width: 80%;
    }
    button {
      background: linear-gradient(90deg, #ffdf88, #f0cf6d);
      color: #000;
      cursor: pointer;
    }
    #numbers button {
      display: inline-block;
      width: 60px; height: 60px;
      font-size: 18px; margin: 4px;
      background: #111724; color: #ffdf88;
      border: 1px solid #444;
      border-radius: 8px;
      cursor: pointer;
    }
    #adModal, #endModal {
      display: none;
      position: fixed; top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.95);
      color: #fff;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      z-index: 1000;
    }
    #progress { width: 80%; height: 10px; background: #333; border-radius: 5px; overflow: hidden; }
    #progress div { height: 100%; width: 0%; background: #ffdf88; transition: width 1s linear; }
    #skipBtn {
      background: #222; color: #aaa;
      border: 1px solid #555; margin-top: 15px;
      cursor: not-allowed;
    }
    #skipBtn.active { background: linear-gradient(90deg, #ffdf88, #f0cf6d); color: #000; cursor: pointer; }
  </style>
</head>
<body>

  <div style="text-align:right;">
    <select id="lang-select" onchange="setLang(this.value)">
      <option value="EN">ğŸ‡¬ğŸ‡§ EN</option>
      <option value="RU">ğŸ‡·ğŸ‡º RU</option>
      <option value="CN">ğŸ‡¨ğŸ‡³ CN</option>
      <option value="IN">ğŸ‡®ğŸ‡³ IN</option>
      <option value="AM">ğŸ‡¦ğŸ‡² AM</option>
    </select>
  </div>

  <h2 id="title">ğŸ’ T21 Play Zone</h2>
  <p id="balance-label">Balance: <span id="balance">0</span> T21</p>
  <p id="plays-label">Games left: <span id="plays">100</span></p>

  <input id="wallet" placeholder="Enter your TON address">
  <button onclick="saveWallet()" id="save-btn">Save Wallet</button>

  <button onclick="showAd()">ğŸ¥ Watch Ad (+10 games)</button>
  <button onclick="shareEarn()">ğŸ¤ Share & Earn (+5 T21)</button>

  <h3 id="guess-title">ğŸ¯ Guess 1â€“9</h3>
  <div id="numbers"></div>

  <!-- Ad Modal -->
  <div id="adModal">
    <h3>Sponsored Video</h3>
    <p id="timer">30 s</p>
    <div id="progress"><div></div></div>
    <button id="skipBtn" onclick="skipAd()">Skip</button>
    <button id="claimBtn" style="display:none;" onclick="claimAd()">Close & Claim</button>
  </div>

  <!-- End Modal -->
  <div id="endModal">
    <h3>ğŸ® No games left!</h3>
    <p>Watch ad to get +10 games or withdraw your T21.</p>
    <button onclick="showAd()">ğŸ¬ Watch Ad (+10)</button>
    <button onclick="withdraw()">ğŸ’° Withdraw</button>
  </div>

<script>
const API = "https://t21-playzone-api.t21playzone.workers.dev";

let balance = parseInt(localStorage.getItem("balance")) || 0;
let plays = parseInt(localStorage.getItem("plays")) || 100;
let wallet = localStorage.getItem("wallet") || "";
let lang = localStorage.getItem("lang") || "EN";

// ----- Ğ¯Ğ·Ñ‹ĞºĞ¸ -----
const LANGS = {
  EN: { title:"ğŸ’ T21 Play Zone", balance:"Balance:", games:"Games left:", save:"Save Wallet",
        watch:"ğŸ¥ Watch Ad (+10 games)", share:"ğŸ¤ Share & Earn (+5 T21)",
        end:"ğŸ® No games left!", more:"Watch ad to get +10 games or withdraw your T21." },
  RU: { title:"ğŸ’ T21 Ğ˜Ğ³Ñ€Ğ¾Ğ²Ğ°Ñ Ğ—Ğ¾Ğ½Ğ°", balance:"Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ:", games:"ĞÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ Ğ¸Ğ³Ñ€:", save:"Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ°Ğ´Ñ€ĞµÑ",
        watch:"ğŸ¥ Ğ¡Ğ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ñ€ĞµĞºĞ»Ğ°Ğ¼Ñƒ (+10 Ğ¸Ğ³Ñ€)", share:"ğŸ¤ ĞŸĞ¾Ğ´ĞµĞ»Ğ¸Ñ‚ÑŒÑÑ (+5 T21)",
        end:"ğŸ® Ğ˜Ğ³Ñ€Ñ‹ Ğ·Ğ°ĞºĞ¾Ğ½Ñ‡Ğ¸Ğ»Ğ¸ÑÑŒ!", more:"Ğ¡Ğ¼Ğ¾Ñ‚Ñ€Ğ¸ Ñ€ĞµĞºĞ»Ğ°Ğ¼Ñƒ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ +10 Ğ¸Ğ³Ñ€ Ğ¸Ğ»Ğ¸ Ğ²Ñ‹Ğ²ĞµÑÑ‚Ğ¸ T21." },
  CN: { title:"ğŸ’ T21 æ¸¸æˆåŒº", balance:"ä½™é¢:", games:"å‰©ä½™æ¸¸æˆ:", save:"ä¿å­˜é’±åŒ…",
        watch:"ğŸ¥ è§‚çœ‹å¹¿å‘Š (+10 æ¸¸æˆ)", share:"ğŸ¤ åˆ†äº« (+5 T21)",
        end:"ğŸ® æ¸¸æˆç»“æŸ!", more:"è§‚çœ‹å¹¿å‘Šå¯è·å¾— +10 æ¸¸æˆæˆ–æå– T21ã€‚" },
  IN: { title:"ğŸ’ T21 à¤ªà¥à¤²à¥‡ à¤œà¤¼à¥‹à¤¨", balance:"à¤¬à¥ˆà¤²à¥‡à¤‚à¤¸:", games:"à¤¶à¥‡à¤· à¤–à¥‡à¤²:", save:"à¤µà¥‰à¤²à¥‡à¤Ÿ à¤¸à¥‡à¤µ à¤•à¤°à¥‡à¤‚",
        watch:"ğŸ¥ à¤µà¤¿à¤œà¥à¤à¤¾à¤ªà¤¨ à¤¦à¥‡à¤–à¥‡à¤‚ (+10 à¤–à¥‡à¤²)", share:"ğŸ¤ à¤¶à¥‡à¤¯à¤° à¤•à¤°à¥‡à¤‚ (+5 T21)",
        end:"ğŸ® à¤–à¥‡à¤² à¤¸à¤®à¤¾à¤ªà¥à¤¤!", more:"à¤µà¤¿à¤œà¥à¤à¤¾à¤ªà¤¨ à¤¦à¥‡à¤–à¥‡à¤‚ +10 à¤–à¥‡à¤² à¤¯à¤¾ T21 à¤¨à¤¿à¤•à¤¾à¤²à¥‡à¤‚à¥¤" },
  AM: { title:"ğŸ’ T21 Ô½Õ¡Õ²Õ¡ÕµÕ«Õ¶ Ô³Õ¸Õ¿Õ«", balance:"Õ€Õ¡Õ·Õ«Õ¾Õ¨:", games:"Ô½Õ¡Õ²Õ¥Ö€ Õ´Õ¶Õ¡ÖÕ¥Õ¬ Õ¥Õ¶:", save:"ÕŠÕ¡Õ°ÕºÕ¡Õ¶Õ¥Õ¬ Õ¤Ö€Õ¡Õ´Õ¡ÕºÕ¡Õ¶Õ¡Õ¯Õ¨",
        watch:"ğŸ¥ Ô´Õ«Õ¿Õ¥Õ¬ Õ£Õ¸Õ¾Õ¡Õ¦Õ¤ (+10 Õ­Õ¡Õ²)", share:"ğŸ¤ Ô¿Õ«Õ½Õ¾Õ¥Õ¬ (+5 T21)",
        end:"ğŸ® Ô½Õ¡Õ²Õ¥Ö€Õ¨ Õ¡Õ¾Õ¡Ö€Õ¿Õ¾Õ¥Õ¬ Õ¥Õ¶!", more:"Ô´Õ«Õ¿Õ«Ö€ Õ£Õ¸Õ¾Õ¡Õ¦Õ¤Õ Õ½Õ¿Õ¡Õ¶Õ¡Õ¬Õ¸Ö‚ +10 Õ­Õ¡Õ² Õ¯Õ¡Õ´ Õ°Õ¡Õ¶Õ¥Õ¬Õ¸Ö‚ T21Ö‰" }
};

// ----- Ğ˜Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ -----
function updateUI(){
  document.getElementById("balance").innerText = balance;
  document.getElementById("plays").innerText = plays;
  localStorage.setItem("balance", balance);
  localStorage.setItem("plays", plays);
}
function applyLang(){
  const t = LANGS[lang];
  document.getElementById("title").innerText = t.title;
  document.getElementById("balance-label").childNodes[0].textContent = t.balance + " ";
  document.getElementById("plays-label").childNodes[0].textContent = t.games + " ";
  document.getElementById("save-btn").innerText = t.save;
  document.querySelectorAll("button")[1].innerText = t.watch;
  document.querySelectorAll("button")[2].innerText = t.share;
  document.getElementById("endModal").querySelector("h3").innerText = t.end;
  document.getElementById("endModal").querySelector("p").innerText = t.more;
  document.getElementById("lang-select").value = lang;
}
function setLang(code){ lang=code; localStorage.setItem("lang",code); applyLang(); }

function saveWallet(){
  const w=document.getElementById("wallet").value.trim();
  if(w){ wallet=w; localStorage.setItem("wallet",w); alert("âœ… Wallet saved!"); }
}

// ----- Ğ ĞµĞºĞ»Ğ°Ğ¼Ğ° -----
let adTimer=30, adInterval;
function showAd(){
  document.getElementById("adModal").style.display="flex";
  document.getElementById("timer").innerText="30 s";
  const bar=document.querySelector("#progress div");
  bar.style.width="0%";
  const skip=document.getElementById("skipBtn");
  skip.classList.remove("active"); skip.disabled=true;
  setTimeout(()=>{skip.classList.add("active"); skip.disabled=false;},5000);
  adTimer=30;
  adInterval=setInterval(()=>{
    adTimer--;
    bar.style.width=(100-(adTimer*100/30))+"%";
    document.getElementById("timer").innerText=adTimer+" s";
    if(adTimer<=0){clearInterval(adInterval); endAd();}
  },1000);
}
function skipAd(){ if(!document.getElementById("skipBtn").disabled) endAd(); }
function endAd(){ clearInterval(adInterval); document.getElementById("skipBtn").style.display="none";
  document.getElementById("claimBtn").style.display="inline-block"; }
function claimAd(){
  document.getElementById("adModal").style.display="none";
  document.getElementById("skipBtn").style.display="inline-block";
  document.getElementById("claimBtn").style.display="none";
  plays+=10; updateUI(); alert("ğŸ® +10 games added!");
}

// ----- Share & Earn -----
function shareEarn(){
  balance+=5; updateUI();
  alert("ğŸ¤ +5 T21 for sharing!");
}

// ----- Ğ˜Ğ³Ñ€Ğ° -----
function makeButtons(){
  const c=document.getElementById("numbers"); c.innerHTML="";
  for(let i=1;i<=9;i++){
    const b=document.createElement("button");
    b.innerText=i;
    b.onclick=()=>guess(i);
    c.appendChild(b);
  }
}
function guess(n){
  if(plays<=0){document.getElementById("endModal").style.display="flex"; return;}
  plays--; updateUI();
  const rnd=Math.floor(Math.random()*9)+1;
  if(rnd===n){ balance+=Math.floor(Math.random()*10)+1; alert("ğŸ¯ You guessed right! +T21"); }
  else alert("âŒ Wrong! Try again.");
  if(plays<=0){document.getElementById("endModal").style.display="flex";}
}

function withdraw(){ alert("ğŸ’° Withdraw request sent!"); document.getElementById("endModal").style.display="none"; }

window.onload=()=>{
  if(wallet) document.getElementById("wallet").value=wallet;
  applyLang(); updateUI(); makeButtons();
};
</script>
</body>
</html>

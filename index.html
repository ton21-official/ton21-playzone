<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
  <title>T21 Play Zone โ Mining</title>
  <meta name="color-scheme" content="dark light">
  <link rel="icon" href="https://raw.githubusercontent.com/ton21-official/ton21_official/main/logo.png"/>

  <style>
    :root{
      --bg:#050814;
      --panel:#0f1524;
      --panel2:#0b1020;
      --border:#1e2942;
      --txt:#e9f0ff;
      --muted:#9fb0c3;
      --accent:#46b2ff;
      --green:#35d49b;
      --orange:#ffb458;
      --red:#ff5c7a;
      --gold1:#ffdf88;
      --gold2:#f0cf6d;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:
        radial-gradient(1200px 700px at 50% -10%, #1b2232 0%, #050814 60%),
        radial-gradient(800px 500px at 120% 110%, #132033 0%, transparent 60%);
      color:var(--txt);
      font:16px/1.45 system-ui,-apple-system,"Segoe UI",Roboto,Arial;
    }
    .wrap{max-width:960px;margin:0 auto;padding:16px 14px 32px;}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px}
    .brand{display:flex;align-items:center;gap:10px}
    .logo{width:32px;height:32px;border-radius:999px;
      background:#02040a url("https://raw.githubusercontent.com/ton21-official/ton21_official/main/logo.png") center/cover no-repeat;
      box-shadow:0 0 18px rgba(70,178,255,.6);
    }
    .brand-title{display:flex;flex-direction:column}
    .brand-title span:first-child{font-weight:700;font-size:17px}
    .brand-title span:last-child{font-size:12px;color:var(--muted)}
    .topbar{display:flex;gap:8px;align-items:center}
    select{
      appearance:none;
      background:#0b1326;
      border:1px solid #253354;
      color:var(--txt);
      padding:8px 26px 8px 10px;
      border-radius:999px;
      font-size:13px;
    }

    .card{
      background:linear-gradient(180deg,#11172a 0%, #090f20 100%);
      border-radius:18px;
      border:1px solid #1e2942;
      padding:16px 14px 18px;
      box-shadow:0 18px 40px rgba(0,0,0,.6);
    }
    .title-main{text-align:center;margin:0 0 10px;font-weight:700;font-size:18px}
    .subtitle{text-align:center;margin:0 0 16px;font-size:13px;color:var(--muted)}

    .balance-box{
      text-align:center;
      padding:10px 8px 14px;
      border-radius:14px;
      background:radial-gradient(circle at 50% 0,#1e2740 0, #0b1020 55%);
      border:1px solid #222c48;
      margin-bottom:14px;
    }
    .balance-label{font-size:13px;color:var(--muted);margin-bottom:4px}
    .balance-value{font-size:28px;font-weight:800;letter-spacing:0.03em}

    .grid2{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px;margin-bottom:14px}
    .pill{
      padding:10px 10px;
      border-radius:14px;
      border:1px solid #1e2942;
      background:#0b1224;
      font-size:12px;
    }
    .pill-label{color:var(--muted);margin-bottom:4px}
    .pill-value{font-weight:600}

    .btn{
      width:100%;
      border-radius:999px;
      border:none;
      padding:12px 16px;
      font-size:15px;
      font-weight:700;
      cursor:pointer;
      margin-bottom:8px;
      transition:transform .05s ease, box-shadow .05s ease, opacity .2s;
    }
    .btn:active{transform:translateY(1px);box-shadow:none}
    .btn[disabled]{opacity:.55;cursor:default}
    .btn-main{
      background:linear-gradient(90deg,#20c6ff,#6af0c4);
      color:#031018;
      box-shadow:0 10px 26px rgba(65,199,255,.4);
    }
    .btn-ad{
      background:linear-gradient(90deg,#ffb458,#ff7e5a);
      color:#1a0700;
      box-shadow:0 10px 26px rgba(255,168,82,.42);
    }
    .btn-secondary{
      background:transparent;
      color:var(--accent);
      border:1px solid #274066;
    }
    .hint{font-size:12px;color:var(--muted);text-align:center;margin-bottom:10px;}

    .section{
      margin-top:16px;
      padding:12px 10px;
      border-radius:14px;
      background:var(--panel2);
      border:1px solid #1a2440;
    }
    .section h3{
      margin:0 0 8px;
      font-size:14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:8px;
    }
    .section p{margin:4px 0;font-size:13px;color:var(--muted);}

    .wallet-input{
      width:100%;
      padding:10px 12px;
      border-radius:10px;
      border:1px solid #273553;
      background:#050a18;
      color:var(--txt);
      font-size:13px;
      margin-bottom:8px;
    }
    .wallet-note{font-size:11px;color:var(--muted);margin-bottom:6px;}
    .info-small{font-size:11px;color:var(--muted);}

    .row-inline{display:flex;gap:8px;align-items:center;flex-wrap:wrap;}
    .row-inline .btn{margin-bottom:0;}

    .timer-text{font-size:12px;color:var(--muted);text-align:center;margin-bottom:6px;}
    .tag{
      display:inline-flex;align-items:center;gap:4px;
      padding:2px 8px;border-radius:999px;
      font-size:11px;border:1px solid #28436a;color:var(--muted);
    }

    .footer{
      margin-top:14px;
      text-align:center;
      font-size:11px;
      color:var(--muted);
    }

    /* fake ad modal */
    .modal{
      position:fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      background:rgba(0,0,0,.65);
      z-index:50;
    }
    .modal-box{
      width:min(420px,92vw);
      background:#0a1020;
      border-radius:16px;
      border:1px solid #283759;
      padding:16px 14px;
    }
    .modal-title{margin:0 0 6px;font-size:15px;font-weight:600;}
    .modal-text{margin:0 0 12px;font-size:13px;color:var(--muted);}
    .progress{
      height:10px;border-radius:999px;
      background:#050814;
      border:1px solid #1f2c49;
      overflow:hidden;
      margin-bottom:10px;
    }
    .progress>i{
      display:block;height:100%;
      width:0;
      background:linear-gradient(90deg,#20c6ff,#6af0c4);
      transition:width 1s linear;
    }
    .modal-actions{display:flex;gap:8px;margin-top:6px;}
    .modal-actions .btn{flex:1;margin-bottom:0;font-size:14px;}

    /* flash */
    .flash{
      position:fixed;
      top:14px;left:50%;
      transform:translateX(-50%);
      background:#101a30;
      border-radius:12px;
      border:1px solid #274066;
      color:#cbe6ff;
      padding:7px 14px;
      font-size:13px;
      display:none;
      z-index:60;
    }
    @media (max-width:480px){
      .wrap{padding:12px 10px 20px;}
      .card{padding:14px 12px 16px;}
      .title-main{font-size:17px;}
    }
  </style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="brand">
      <div class="logo"></div>
      <div class="brand-title">
        <span>Ton21 Mining</span>
        <span id="subtitle">Virtual pre-mine like Pi Network</span>
      </div>
    </div>
    <div class="topbar">
      <span style="font-size:14px">๐</span>
      <select id="langSel">
        <option value="en">EN</option>
        <option value="ru" selected>RU</option>
        <option value="cn">ไธญๆ</option>
        <option value="in">เคนเคฟเคจเฅเคฆเฅ</option>
        <option value="am">ีีกีต</option>
      </select>
    </div>
  </header>

  <div class="card">
    <h2 class="title-main" id="mainTitle">T21 Play Zone โ Mining</h2>
    <div class="subtitle" id="subNote">Virtual pre-mine. Balance is not on-chain yet.</div>

    <div class="balance-box">
      <div class="balance-label" id="balLabel">Your balance</div>
      <div class="balance-value"><span id="balanceValue">0</span> T21</div>
    </div>

    <div class="grid2">
      <div class="pill">
        <div class="pill-label" id="rateLabel">Mining speed</div>
        <div class="pill-value" id="rateValue">+20 T21 / day</div>
      </div>
      <div class="pill">
        <div class="pill-label" id="adRateLabel">Ad bonus</div>
        <div class="pill-value" id="adRateValue">+5 T21 / ad โข 10/day</div>
      </div>
    </div>

    <div class="hint">
      <span class="tag" id="virtualTag">Virtual pre-mine</span>
      <span id="noPayoutYet"> No real payouts yet โ only internal stats.</span>
    </div>

    <button class="btn btn-main" id="mineBtn">โถ Start / Claim 20 T21</button>
    <div class="timer-text" id="mineTimer">Next daily bonus in 24:00:00</div>

    <button class="btn btn-ad" id="adBtn">๐ฌ Watch ad (+5 T21)</button>
    <div class="timer-text" id="adInfo">Ad bonus: 0 / 10 used today</div>

    <div class="section">
      <h3>
        <span id="walletTitle">Your TON address (future payouts)</span>
      </h3>
      <p id="walletText1">Now everything is virtual. Later you will manually send T21 to active miners.</p>
      <p id="walletText2" class="info-small">
        We save the address to know how much each user mined when real payouts start.
      </p>
      <input id="walletInput" class="wallet-input" placeholder="EQ... / UQ..." autocomplete="off"/>
      <div class="wallet-note" id="walletNote">Address is stored locally in this browser.</div>
      <button class="btn btn-secondary" id="saveWalletBtn">Save address</button>
    </div>

    <div class="section">
      <h3>
        <span id="aboutTitle">About Ton21</span>
      </h3>
      <p id="aboutP1"></p>
      <p id="aboutP2"></p>
      <p id="aboutP3"></p>
    </div>

    <div class="section">
      <h3>
        <span id="howTitle">How mining works</span>
      </h3>
      <p id="howP1"></p>
      <p id="howP2"></p>
      <p id="howP3"></p>
    </div>

    <div class="section">
      <h3>
        <span id="shareTitle">Invite & Share</span>
      </h3>
      <p id="shareText"></p>
      <div class="row-inline">
        <button class="btn btn-secondary" id="shareBtn">Share Ton21 Mining</button>
      </div>
    </div>

    <div class="footer" id="footerText">
      Powered by Ton21 Project โข v0.2 virtual pre-mine โข Balance stored in browser (localStorage)
    </div>
  </div>
</div>

<div class="flash" id="flash"></div>

<!-- Fake Ad modal -->
<div class="modal" id="adModal">
  <div class="modal-box">
    <h3 class="modal-title" id="adModalTitle">Sponsored video</h3>
    <p class="modal-text" id="adModalText">Please wait 30 seconds to receive your bonus.</p>
    <div class="progress"><i id="adBar"></i></div>
    <div class="timer-text" id="adCountdownText">00:30</div>
    <div class="modal-actions">
      <button class="btn btn-secondary" id="adCloseBtn" disabled>Close</button>
      <button class="btn btn-main" id="adClaimBtn" disabled>Get reward</button>
    </div>
  </div>
</div>

<script>
  // ---------- settings ----------
  var DAILY_REWARD = 20;
  var AD_REWARD = 5;
  var MAX_ADS_PER_DAY = 10;
  var AD_SECONDS = 30;
  var DAY_MS = 24 * 60 * 60 * 1000;

  // ---------- translations ----------
  var T = {
    en:{
      subtitle:"Virtual pre-mine like Pi Network",
      mainTitle:"T21 Play Zone โ Mining",
      subNote:"Virtual pre-mine. Balance is off-chain and stored locally (later โ on server).",
      balLabel:"Your balance",
      rateLabel:"Mining speed",
      rateValue:"+20 T21 / day",
      adRateLabel:"Ad boost",
      adRateValue:"+5 T21 / ad โข up to 10 per day",
      virtualTag:"Virtual pre-mine",
      noPayoutYet:" No real payouts yet โ internal stats only.",
      mineBtnReady:"โถ Start / Claim 20 T21",
      mineBtnBusy:"Processing...",
      mineReady:"Daily bonus is available now.",
      mineNext:"Next daily bonus in",
      adBtn:"๐ฌ Watch ad (+5 T21)",
      adInfo:function(used){return "Ad bonus: "+used+" / 10 used today";},
      adLimit:"Daily ad limit reached (10 / 10).",
      walletTitle:"Your TON address (for future payouts)",
      walletText1:"Right now everything is virtual. Later you will manually send real T21 to active miners.",
      walletText2:"We save the address to know how much each miner earned when payouts start.",
      walletNote:"The address is stored locally in this browser (and later can be synced to server).",
      aboutTitle:"About Ton21",
      aboutP1:"Ton21 (T21) is a community-driven token with a fixed supply on the TON blockchain โ inspired by Bitcoinโs 21M idea.",
      aboutP2:"The mission is to build a long-term ecosystem: games, airdrops, rewards, and tools for the TON community.",
      aboutP3:"Virtual mining in this mini-app helps distribute attention and future rewards among early supporters.",
      howTitle:"How mining works",
      howP1:"Once per 24 hours you can tap the Mining button and receive +20 T21 to your virtual balance.",
      howP2:"+5 T21 for each ad view, up to 10 times per day. Ads can be rewarded or our own promos.",
      howP3:"Later balances may be exported and matched with your TON address for manual airdrops or rewards.",
      shareTitle:"Invite & Share",
      shareText:"Share the mining app with friends. The more active miners we have, the stronger the Ton21 ecosystem becomes.",
      flashSaved:"โ Address saved",
      flashBadAddr:"โ๏ธ Enter a valid TON address (starts with EQ or UQ).",
      flashMine:"+20 T21 added to your balance.",
      flashAd:"+5 T21 added for watching the ad.",
      flashAdStart:"Ad started โ please wait 30 secondsโฆ",
      modalMineTitle:"Mining bonus โ watch first",
      modalMineText:"Watch this short sponsored video (30 seconds). After that your +20 T21 daily bonus will be credited.",
      modalAdTitle:"Ad reward",
      modalAdText:"+5 T21 will be credited after 30 seconds of viewing.",
      modalBtnClose:"Close",
      modalBtnGet:"Get reward",
      needOnline:"If sharing does not open, copy the link manually."
    },
    ru:{
      subtitle:"ะะธัััะฐะปัะฝัะน pre-mine ะบะฐะบ Pi Network",
      mainTitle:"T21 Play Zone โ ะะฐะนะฝะธะฝะณ",
      subNote:"ะะธัััะฐะปัะฝัะน ะผะฐะนะฝะธะฝะณ. ะะฐะปะฐะฝั ะฒะฝะต ะฑะปะพะบัะตะนะฝะฐ, ััะฐะฝะธััั ะปะพะบะฐะปัะฝะพ (ะฟะพะทะถะต โ ะฝะฐ ัะตัะฒะตัะต).",
      balLabel:"ะะฐั ะฑะฐะปะฐะฝั",
      rateLabel:"ะกะบะพัะพััั ะผะฐะนะฝะธะฝะณะฐ",
      rateValue:"+20 T21 / ะดะตะฝั",
      adRateLabel:"ะะตะบะปะฐะผะฝัะน ะฑััั",
      adRateValue:"+5 T21 ะทะฐ ัะตะบะปะฐะผั โข ะดะพ 10 ะฒ ัััะบะธ",
      virtualTag:"ะะธัััะฐะปัะฝัะน pre-mine",
      noPayoutYet:" ะะพะบะฐ ัะตะฐะปัะฝัั ะฒัะฟะปะฐั ะฝะตั โ ัะพะปัะบะพ ะฒะฝัััะตะฝะฝัั ััะฐัะธััะธะบะฐ.",
      mineBtnReady:"โถ ะะฐะฟัััะธัั / ะะพะปััะธัั 20 T21",
      mineBtnBusy:"ะะฑัะฐะฑะพัะบะฐ...",
      mineReady:"ะะถะตะดะฝะตะฒะฝัะน ะฑะพะฝัั ะดะพัััะฟะตะฝ.",
      mineNext:"ะกะปะตะดัััะธะน ะฑะพะฝัั ัะตัะตะท",
      adBtn:"๐ฌ ะกะผะพััะตัั ัะตะบะปะฐะผั (+5 T21)",
      adInfo:function(used){return "ะะตะบะปะฐะผะฝัะน ะฑะพะฝัั: "+used+" / 10 ะธัะฟะพะปัะทะพะฒะฐะฝะพ ะทะฐ ัะตะณะพะดะฝั";},
      adLimit:"ะะธะผะธั ัะตะบะปะฐะผะฝัั ะฑะพะฝััะพะฒ ะฝะฐ ัะตะณะพะดะฝั (10 / 10).",
      walletTitle:"ะะฐั TON-ะฐะดัะตั (ะดะปั ะฑัะดััะธั ะฒัะฟะปะฐั)",
      walletText1:"ะกะตะนัะฐั ะฒัั ะฒะธัััะฐะปัะฝะพ. ะะพะทะถะต ัั ะฒัััะฝัั ะพัะฟัะฐะฒะธัั ัะตะฐะปัะฝัะต T21 ะฐะบัะธะฒะฝัะผ ะผะฐะนะฝะตัะฐะผ.",
      walletText2:"ะั ัะพััะฐะฝัะตะผ ะฐะดัะตั, ััะพะฑั ะฟะพะฝะธะผะฐัั, ะบะพะผั ะธ ัะบะพะปัะบะพ ะฝะฐัะธัะปััั ะฟัะธ ััะฐััะต ะฒัะฟะปะฐั.",
      walletNote:"ะะดัะตั ััะฐะฝะธััั ะปะพะบะฐะปัะฝะพ ะฒ ััะพะผ ะฑัะฐัะทะตัะต (ะฟะพะทะถะต ะผะพะถะตะผ ะดะพะฑะฐะฒะธัั ัะธะฝััะพะฝะธะทะฐัะธั ั ัะตัะฒะตัะพะผ).",
      aboutTitle:"ะ Ton21",
      aboutP1:"Ton21 (T21) โ ัะพะบะตะฝ ัะพะพะฑัะตััะฒะฐ ั ัะธะบัะธัะพะฒะฐะฝะฝะพะน ัะผะธััะธะตะน ะฒ ัะตัะธ TON, ะฒะดะพัะฝะพะฒะปัะฝ ะธะดะตะตะน 21M ะบะฐะบ ั Bitcoin.",
      aboutP2:"ะะฐัะฐ ะผะธััะธั โ ะดะพะปะณะพััะพัะฝะฐั ัะบะพัะธััะตะผะฐ: ะธะณัั, airdrop-ะบะฐะผะฟะฐะฝะธะธ, ะฝะฐะณัะฐะดั ะธ ะธะฝััััะผะตะฝัั ะดะปั ัะพะพะฑัะตััะฒะฐ TON.",
      aboutP3:"ะะธัััะฐะปัะฝัะน ะผะฐะนะฝะธะฝะณ ะฒ ะผะธะฝะธ-ะฟัะธะปะพะถะตะฝะธะธ ะฟะพะผะพะณะฐะตั ัะตััะฝะพ ัะฐัะฟัะตะดะตะปะธัั ะฑัะดััะตะต ะฒะพะทะฝะฐะณัะฐะถะดะตะฝะธะต ะผะตะถะดั ัะฐะฝะฝะธะผะธ ััะฐััะฝะธะบะฐะผะธ.",
      howTitle:"ะะฐะบ ัะฐะฑะพัะฐะตั ะผะฐะนะฝะธะฝะณ",
      howP1:"ะะฐะท ะฒ 24 ัะฐัะฐ ะผะพะถะฝะพ ะฝะฐะถะฐัั ะบะฝะพะฟะบั ะะฐะนะฝะธะฝะณ ะธ ะฟะพะปััะธัั +20 T21 ะฝะฐ ะฒะธัััะฐะปัะฝัะน ะฑะฐะปะฐะฝั.",
      howP2:"+5 T21 ะทะฐ ะฟัะพัะผะพัั ัะตะบะปะฐะผั, ะดะพ 10 ัะฐะท ะฒ ัััะบะธ. ะญัะพ ะผะพะณัั ะฑััั ัะตะฐะปัะฝัะต ัะตะบะปะฐะผะฝัะต ัะพะปะธะบะธ ะธะปะธ ะฝะฐัะธ ะฟัะพะผะพ.",
      howP3:"ะะพะทะถะต ััะธ ะฑะฐะปะฐะฝัั ะผะพะถะฝะพ ะฑัะดะตั ัะบัะฟะพััะธัะพะฒะฐัั ะธ ัะฒัะทะฐัั ั TON-ะฐะดัะตัะพะผ ะดะปั ัััะฝัั airdrop-ะฒัะฟะปะฐั.",
      shareTitle:"ะัะธะณะปะฐัะธ ะดััะทะตะน",
      shareText:"ะะพะดะตะปะธัั ะผะธะฝะธ-ะฟัะธะปะพะถะตะฝะธะตะผ ั ะดััะทััะผะธ. ะงะตะผ ะฑะพะปััะต ะฐะบัะธะฒะฝัั ะผะฐะนะฝะตัะพะฒ โ ัะตะผ ัะธะปัะฝะตะต ัะบะพัะธััะตะผะฐ Ton21.",
      flashSaved:"โ ะะดัะตั ัะพััะฐะฝัะฝ",
      flashBadAddr:"โ๏ธ ะะฒะตะดะธัะต ะบะพััะตะบัะฝัะน TON-ะฐะดัะตั (ะฝะฐัะธะฝะฐะตััั ั EQ ะธะปะธ UQ).",
      flashMine:"+20 T21 ะดะพะฑะฐะฒะปะตะฝะพ ะฝะฐ ะฑะฐะปะฐะฝั.",
      flashAd:"+5 T21 ะทะฐ ะฟัะพัะผะพัั ัะตะบะปะฐะผั.",
      flashAdStart:"ะะตะบะปะฐะผะฐ ะทะฐะฟััะตะฝะฐ โ ะฟะพะดะพะถะดะธัะต 30 ัะตะบัะฝะดโฆ",
      modalMineTitle:"ะะถะตะดะฝะตะฒะฝัะน ะฑะพะฝัั โ ัะฝะฐัะฐะปะฐ ัะตะบะปะฐะผะฐ",
      modalMineText:"ะะพัะผะพััะธัะต ะบะพัะพัะบะธะน ัะพะปะธะบ (30 ัะตะบ). ะะพัะปะต ะฟัะพัะผะพััะฐ ะฑัะดะตั ะฝะฐัะธัะปะตะฝะพ +20 T21.",
      modalAdTitle:"ะะตะบะปะฐะผะฝัะน ะฑะพะฝัั",
      modalAdText:"+5 T21 ะฑัะดะตั ะฝะฐัะธัะปะตะฝะพ ะฟะพัะปะต 30 ัะตะบัะฝะด ะฟัะพัะผะพััะฐ.",
      modalBtnClose:"ะะฐะบัััั",
      modalBtnGet:"ะะพะปััะธัั",
      needOnline:"ะัะปะธ ะพะบะฝะพ ะฝะต ะพัะบััะปะพัั โ ัะบะพะฟะธััะนัะต ัััะปะบั ะฒัััะฝัั."
    },
    cn:{
      subtitle:"็ฑปไผผ Pi Network ็่ๆ้ขๆ",
      mainTitle:"T21 Play Zone โ ๆ็ฟ",
      subNote:"่ๆๆ็ฟ๏ผไฝ้ขๆๆถไธๅจ้พไธ๏ผๅไฟๅญๅจๆฌๅฐ๏ผไปฅๅๅๆญฅๆๅกๅจ๏ผใ",
      balLabel:"ไฝ็ไฝ้ข",
      rateLabel:"ๆ็ฟ้ๅบฆ",
      rateValue:"+20 T21 / ๅคฉ",
      adRateLabel:"ๅนฟๅๅฅๅฑ",
      adRateValue:"+5 T21 / ๅนฟๅ โข ๆฏๅคฉๆๅค 10 ๆฌก",
      virtualTag:"่ๆ้ขๆ",
      noPayoutYet:" ็ฎๅๆฒกๆ็ๅฎๅๆพ๏ผๅชๆฏๅ้จ็ป่ฎกใ",
      mineBtnReady:"โถ ๅผๅง / ้ขๅ 20 T21",
      mineBtnBusy:"ๅค็ไธญ...",
      mineReady:"ๆฏๆฅๅฅๅฑๅฏ้ขๅใ",
      mineNext:"ไธๆฌกๅฅๅฑๅ่ฎกๆถ",
      adBtn:"๐ฌ ็ๅนฟๅ (+5 T21)",
      adInfo:function(used){return "ๅนฟๅๅฅๅฑ๏ผไปๅคฉๅทฒไฝฟ็จ "+used+" / 10";},
      adLimit:"ไปๆฅๅนฟๅๅฅๅฑๆฌกๆฐๅทฒๆปก (10 / 10)ใ",
      walletTitle:"ไฝ็ TON ๅฐๅ๏ผๆชๆฅๅๆพ็จ๏ผ",
      walletText1:"็ฐๅจไธๅ้ฝๆฏ่ๆ็ใไปฅๅไผๆนๆฎๆดป่ทๅบฆๅ็ฟๅทฅๅๆพ็ๅฎ T21ใ",
      walletText2:"ๆไปฌไฟๅญๅฐๅ๏ผๆฏไธบไบๅจๅผๅงๅๆพๆถ็ฅ้ๆฏไฝ็ฟๅทฅ็ไปฝ้ขใ",
      walletNote:"ๅฐๅๅชไฟๅญๅจๆฌๅฐๆต่งๅจไธญ๏ผไปฅๅๅฏๅๆญฅๅฐๆๅกๅจ๏ผใ",
      aboutTitle:"ๅณไบ Ton21",
      aboutP1:"Ton21 (T21) ๆฏๅบไบ TON ้พ็็คพๅบไปฃๅธ๏ผๆป้ๅบๅฎ๏ผ็ตๆๆฅ่ชๆฏ็นๅธ 2100 ไธใ",
      aboutP2:"็ฎๆๆฏๆ้้ฟๆ็ๆ๏ผๆธธๆใ็ฉบๆๅฅๅฑๅ็คพๅบๅทฅๅทใ",
      aboutP3:"่ฟไธช่ๆๆ็ฟ Mini App ็จๆฅๅจๆฉๆ็จๆทไน้ดๅฌๅนณๅ้ๆชๆฅๅฅๅฑใ",
      howTitle:"ๆ็ฟ่งๅ",
      howP1:"ๆฏ 24 ๅฐๆถๅฏ็นๅปไธๆฌกๆ็ฟๆ้ฎ๏ผ่ทๅพ +20 T21 ่ๆไฝ้ขใ",
      howP2:"ๆฏๆฌก็ๅนฟๅ +5 T21๏ผๆฏๅคฉๆๅค 10 ๆฌกใๅฏไปฅๆฏ็ๅฎๅนฟๅๆ่้กน็ฎๅฎฃไผใ",
      howP3:"ไปฅๅไผๆนๆฎๆฌๅฐไฝ้ขๅ TON ๅฐๅ๏ผๆๅจๅๆพ็ฉบๆๆๅฅๅฑใ",
      shareTitle:"้่ฏทๅฅฝๅ",
      shareText:"ๆ Ton21 ๆ็ฟๅไบซ็ปๆๅ๏ผไบบ่ถๅค๏ผ็ๆ่ถๅผบใ",
      flashSaved:"โ ๅฐๅๅทฒไฟๅญ",
      flashBadAddr:"โ๏ธ ่ฏท่พๅฅๆๆ็ TON ๅฐๅ๏ผไปฅ EQ ๆ UQ ๅผๅคด๏ผใ",
      flashMine:"+20 T21 ๅทฒๅๅฅไฝ้ขใ",
      flashAd:"+5 T21 ๅนฟๅๅฅๅฑๅทฒๅๅฅไฝ้ขใ",
      flashAdStart:"ๅนฟๅๅผๅง๏ผ่ฏท็ญๅพ 30 ็งโฆ",
      modalMineTitle:"ๆฏๆฅๅฅๅฑ โ ๅ่ง็ๅนฟๅ",
      modalMineText:"่ง็ 30 ็ง็ญ่ง้ขๅ๏ผไฝๅฐ่ทๅพ +20 T21ใ",
      modalAdTitle:"ๅนฟๅๅฅๅฑ",
      modalAdText:"่ง็ 30 ็งๅๅฐ่ทๅพ +5 T21ใ",
      modalBtnClose:"ๅณ้ญ",
      modalBtnGet:"้ขๅๅฅๅฑ",
      needOnline:"ๅฆๆๅไบซ็ชๅฃๆฒกๆๅผ๏ผ่ฏทๆๅจๅคๅถ้พๆฅใ"
    },
    in:{
      subtitle:"Pi Network เคเฅเคธเคพ เคตเคฐเฅเคเฅเคเคฒ เคชเฅเคฐเฅ-เคฎเคพเคเคจ",
      mainTitle:"T21 Play Zone โ Mining",
      subNote:"เคฏเคน เคตเคฐเฅเคเฅเคเคฒ เคฎเคพเคเคจเคฟเคเค เคนเฅเฅค เคฌเฅเคฒเฅเคเคธ เคเคญเฅ เคฌเฅเคฒเฅเคเคเฅเคจ เคชเคฐ เคจเคนเฅเค, เคฒเฅเคเคฒ เคธเฅเคเฅเคฐเฅเค เคฎเฅเค เคธเฅเคต เคนเฅเคคเคพ เคนเฅเฅค",
      balLabel:"เคเคชเคเคพ เคฌเฅเคฒเฅเคเคธ",
      rateLabel:"เคฎเคพเคเคจเคฟเคเค เคธเฅเคชเฅเคก",
      rateValue:"+20 T21 / เคฆเคฟเคจ",
      adRateLabel:"เคเคก เคฌเฅเคจเคธ",
      adRateValue:"+5 T21 / เคเคก โข เคฆเคฟเคจ เคฎเฅเค 10 เคฌเคพเคฐ",
      virtualTag:"เคตเคฐเฅเคเฅเคเคฒ เคชเฅเคฐเฅ-เคฎเคพเคเคจ",
      noPayoutYet:" เคเคญเฅ เคเคธเคฒเฅ เคชเฅเคฎเฅเคเค เคจเคนเฅเค โ เคธเคฟเคฐเฅเคซ เคเคเคคเคฐเคฟเค เคธเฅเคเฅเคเฅเคธเฅค",
      mineBtnReady:"โถ เคธเฅเคเคพเคฐเฅเค / 20 T21 เคฒเฅเค",
      mineBtnBusy:"เคชเฅเคฐเฅเคธเฅเคธ เคนเฅ เคฐเคนเคพ เคนเฅ...",
      mineReady:"เคกเฅเคฒเฅ เคฌเฅเคจเคธ เคเคชเคฒเคฌเฅเคง เคนเฅเฅค",
      mineNext:"เคเคเคฒเคพ เคฌเฅเคจเคธ เคเคคเคจเฅ เคธเคฎเคฏ เคฌเคพเคฆ:",
      adBtn:"๐ฌ เคเคก เคฆเฅเคเฅเค (+5 T21)",
      adInfo:function(used){return "เคเคก เคฌเฅเคจเคธ: เคเค "+used+" / 10 เคเคธเฅเคคเฅเคฎเคพเคฒ";},
      adLimit:"เคเค เคเฅ เคฒเคฟเค เคเคก เคฌเฅเคจเคธ เคฒเคฟเคฎเคฟเค เคชเฅเคฐเฅ เคนเฅ เคเค (10 / 10)เฅค",
      walletTitle:"เคเคชเคเคพ TON เคชเคคเคพ (เคซเฅเคฏเฅเคเคฐ เคชเฅเคฎเฅเคเค เคเฅ เคฒเคฟเค)",
      walletText1:"เคเคญเฅ เคธเคฌ เคเฅเค เคตเคฐเฅเคเฅเคเคฒ เคนเฅเฅค เคฌเคพเคฆ เคฎเฅเค เคธเคเฅเคฐเคฟเคฏ เคฎเคพเคเคจเคฐเฅเคธ เคเฅ เคเคธเคฒเฅ T21 เคญเฅเคเฅ เคเคพ เคธเคเคคเฅ เคนเฅเคเฅค",
      walletText2:"เคนเคฎ เคชเคคเคพ เคธเฅเคต เคเคฐเคคเฅ เคนเฅเค เคคเคพเคเคฟ เคชเฅเคฎเฅเคเค เคถเฅเคฐเฅ เคนเฅเคจเฅ เคชเคฐ เคชเคคเคพ เคนเฅ เคเคฟเคธเฅ เคเคฟเคคเคจเคพ เคฆเฅเคจเคพ เคนเฅเฅค",
      walletNote:"เคชเคคเคพ เคธเคฟเคฐเฅเคซ เคเคธ เคฌเฅเคฐเคพเคเคเคผเคฐ เคฎเฅเค เคฒเฅเคเคฒเฅ เคธเฅเคต เคนเฅเคคเคพ เคนเฅ (เคฌเคพเคฆ เคฎเฅเค เคธเคฐเฅเคตเคฐ เคชเคฐ เคญเฅ เคญเฅเค เคธเคเคคเฅ เคนเฅเค)เฅค",
      aboutTitle:"Ton21 เคเฅ เคฌเคพเคฐเฅ เคฎเฅเค",
      aboutP1:"Ton21 (T21) โ TON เคฌเฅเคฒเฅเคเคเฅเคจ เคชเคฐ เคซเคฟเคเฅเคธเฅเคก เคธเคชเฅเคฒเคพเค เคตเคพเคฒเคพ เคเคฎเฅเคฏเฅเคจเคฟเคเฅ เคเฅเคเคจ เคนเฅ, เคเฅ Bitcoin เคเฅ 21M เคเฅเคจเฅเคธเฅเคชเฅเค เคธเฅ เคชเฅเคฐเฅเคฐเคฟเคค เคนเฅเฅค",
      aboutP2:"เคนเคฎเคพเคฐเคพ เคซเฅเคเคธ เคฒเฅเคจเฅเค-เคเคฐเฅเคฎ เคเคเฅเคธเคฟเคธเฅเคเคฎ เคนเฅ: เคเฅเคฎเฅเคธ, เคเคฏเคฐเคกเฅเคฐเฅเคช, เคฐเคฟเคตเฅเคฐเฅเคก เคเคฐ เคเคฎเฅเคฏเฅเคจเคฟเคเฅ เคเฅเคฒเฅเคธเฅค",
      aboutP3:"เคเคธ Mini App เคฎเฅเค เคตเคฐเฅเคเฅเคเคฒ เคฎเคพเคเคจเคฟเคเค เคถเฅเคฐเฅเคเคคเฅ เคธเคชเฅเคฐเฅเคเคฐเฅเคธ เคเฅ เคฌเฅเค เคซเฅเคฏเฅเคเคฐ เคฐเคฟเคตเฅเคฐเฅเคก เคฌเคพเคเคเคจเฅ เคเคพ เคคเคฐเฅเคเคพ เคนเฅเฅค",
      howTitle:"เคฎเคพเคเคจเคฟเคเค เคเฅเคธเฅ เคเคพเคฎ เคเคฐเคคเคพ เคนเฅ",
      howP1:"เคนเคฐ 24 เคเคเคเฅ เคฎเฅเค เคเคช เคเค เคฌเคพเคฐ เคฎเคพเคเคจเคฟเคเค เคฌเคเคจ เคฆเคฌเคพเคเคฐ +20 T21 เคตเคฐเฅเคเฅเคเคฒ เคฌเฅเคฒเฅเคเคธ เคฒเฅ เคธเคเคคเฅ เคนเฅเคเฅค",
      howP2:"เคนเคฐ เคเคก เคชเคฐ +5 T21, เคฆเคฟเคจ เคฎเฅเค เคเคงเคฟเคเคคเคฎ 10 เคฌเคพเคฐเฅค เคฏเคน เคฐเฅเคฏเคฒ เคเคก เคฏเคพ เคนเคฎเคพเคฐเฅ เคธเฅเคตเคฏเค เคเฅ เคชเฅเคฐเคฎเฅ เคนเฅ เคธเคเคคเฅ เคนเฅเคเฅค",
      howP3:"เคเคเฅ เคเคฒเคเคฐ เคเคจเฅเคนเฅเค เคฌเฅเคฒเฅเคเคธ เคเฅ TON เคชเคคเฅ เคธเฅ เคฒเคฟเคเค เคเคฐเคเฅ เคฎเฅเคจเฅเคเคฒ เคเคฏเคฐเคกเฅเคฐเฅเคช เคเคฟเคฏเคพ เคเคพ เคธเคเคคเคพ เคนเฅเฅค",
      shareTitle:"เคฆเฅเคธเฅเคคเฅเค เคเฅ เคเคฎเคเคคเฅเคฐเคฟเคค เคเคฐเฅเค",
      shareText:"Ton21 เคฎเคพเคเคจเคฟเคเค เคเคชเคจเฅ เคฆเฅเคธเฅเคคเฅเค เคเฅ เคธเคพเคฅ เคถเฅเคฏเคฐ เคเคฐเฅเค โ เคเคฟเคคเคจเฅ เคเฅเคฏเคพเคฆเคพ เคฏเฅเคเคผเคฐ, เคเคคเคจเคพ เคฎเคเคฌเฅเคค เคเคเฅเคธเคฟเคธเฅเคเคฎเฅค",
      flashSaved:"โ เคชเคคเคพ เคธเฅเคต เคนเฅ เคเคฏเคพ",
      flashBadAddr:"โ๏ธ เคธเคนเฅ TON เคชเคคเคพ เคฆเคฐเฅเค เคเคฐเฅเค (EQ เคฏเคพ UQ เคธเฅ เคถเฅเคฐเฅ)เฅค",
      flashMine:"+20 T21 เคฌเฅเคฒเฅเคเคธ เคฎเฅเค เคเฅเคกเคผ เคฆเคฟเค เคเคเฅค",
      flashAd:"+5 T21 เคเคก เคฌเฅเคจเคธ เคเฅเคกเคผ เคฆเคฟเคฏเคพ เคเคฏเคพเฅค",
      flashAdStart:"เคเคก เคถเฅเคฐเฅ เคนเฅ เคเคฏเคพ โ 30 เคธเฅเคเคเคก เคเคเคคเคเคผเคพเคฐ เคเคฐเฅเคโฆ",
      modalMineTitle:"เคกเฅเคฒเฅ เคฌเฅเคจเคธ โ เคชเคนเคฒเฅ เคเคก เคฆเฅเคเฅเค",
      modalMineText:"30 เคธเฅเคเคเคก เคเคพ เคเฅเคเคพ เคตเฅเคกเคฟเคฏเฅ เคฆเฅเคเฅเค, เคเคธเคเฅ เคฌเคพเคฆ +20 T21 เคฎเคฟเคฒเฅเคเคเฅเฅค",
      modalAdTitle:"เคเคก เคฌเฅเคจเคธ",
      modalAdText:"30 เคธเฅเคเคเคก เคฆเฅเคเคจเฅ เคเฅ เคฌเคพเคฆ +5 T21 เคฎเคฟเคฒเฅเคเคเฅเฅค",
      modalBtnClose:"Close",
      modalBtnGet:"Reward เคฒเฅเค",
      needOnline:"เคเคเคฐ เคถเฅเคฏเคฐ เคตเคฟเคเคกเฅ เคจเคนเฅเค เคเฅเคฒเคพ เคคเฅ เคฒเคฟเคเค เคเฅเคชเฅ เคเคฐ เคฒเฅเคเฅค"
    },
    am:{
      subtitle:"ีีซึีฟีธึีกีฌ pre-mineี ีซีถีนีบีฅีฝ Pi Network-ีจ",
      mainTitle:"T21 Play Zone โ ีีกีตีถีซีถีฃ",
      subNote:"ีีซึีฟีธึีกีฌ ีดีกีตีถีซีถีฃ ีงโค ีดีถีกึีธึีคีจ ีคีฅีผ ีขีฌีธีฏีนีฅีตีถีธึีด ีนีง, ีบีกีฐีพีธึีด ีง localStorage-ีธึีด (ีฐีฅีฟีธี ีฝีฅึีพีฅึีธึีด)ึ",
      balLabel:"ีีฅึ ีดีถีกึีธึีคีจ",
      rateLabel:"ีีกีตีถีซีถีฃีซ ีกึีกีฃีธึีฉีตีธึีถ",
      rateValue:"+20 T21 / ึึ",
      adRateLabel:"ิณีธีพีกีฆีคีกีตีซีถ ีขีธีถีธึีฝ",
      adRateValue:"+5 T21 / ีฃีธีพีกีฆีค โข ึึีกีฏีกีถ ีดีซีถีนึ 10 ีกีถีฃีกีด",
      virtualTag:"ีีซึีฟีธึีกีฌ pre-mine",
      noPayoutYet:" ิฑีตีชีด ีซึีกีฏีกีถ ีพีณีกึีธึีดีถีฅึ ีนีฏีกีถ โ ีดีซีกีตีถ ีถีฅึึีซีถ ีพีซีณีกีฏีกีฃึีธึีฉีตีธึีถึ",
      mineBtnReady:"โถ ีีฏีฝีฅีฌ / ีีฟีกีถีกีฌ 20 T21",
      mineBtnBusy:"ีีทีกีฏีพีธึีด ีง...",
      mineReady:"ีึีตีก ีขีธีถีธึีฝีจ ีฐีกีฝีกีถีฅีฌีซ ีงึ",
      mineNext:"ีีกีปีธึีค ีขีธีถีธึีฝีจี",
      adBtn:"๐ฌ ิดีซีฟีฅีฌ ีฃีธีพีกีฆีค (+5 T21)",
      adInfo:function(used){return "ิณีธีพีกีฆีคีซ ีขีธีถีธึีฝี ีกีตีฝึึ "+used+" / 10 ึีฃีฟีกีฃีธึีฎีพีกีฎ";},
      adLimit:"ิฑีตีฝึึีพีก ีฃีธีพีกีฆีคีกีตีซีถ ีขีธีถีธึีฝีถีฅึีซ ีฝีกีฐีดีกีถีจ ีฌึีกึีกีฎ ีง (10 / 10)ึ",
      walletTitle:"ีีฅึ TON ีฐีกีฝึีฅีถ (ีกีบีกีฃีก ีพีณีกึีธึีดีถีฅึีซ ีฐีกีดีกึ)",
      walletText1:"ีีซีดีก ีกีดีฅีถ ีซีถีน ีพีซึีฟีธึีกีฌ ีงึ ีีฅีฟีกีฃีกีตีธึีด ีกีฏีฟีซีพ ีดีกีตีถีฅึีถีฅึีซีถ ีฏีกึีธีฒ ีฅึ ีธึีฒีกึีฏีฅีฌ ีซึีกีฏีกีถ T21ึ",
      walletText2:"ีีฅีถึ ีบีกีฐีบีกีถีธึีด ีฅีถึ ีฐีกีฝึีฅีถ, ีธึีบีฅีฝีฆีซ ีซีดีกีถีกีถึี ีฝีฏีฝีฅีฌีธึึ ีฐีฅีฟีธ ีธึีด ีธึึีกีถ ีฐีกีฟีฏีกึีถีฅีฌึ",
      walletNote:"ีีกีฝึีฅีถ ีบีกีฐีพีธึีด ีง ีดีซีกีตีถ ีกีตีฝ ีขึีกีธึีฆีฅึีธึีด (ีฐีฅีฟีกีฃีกีตีธึีด ีฏีกึีฅีฌีซ ีง ีธึีฒีกึีฏีฅีฌ ีฝีฅึีพีฅึ)ึ",
      aboutTitle:"Ton21 ีถีกีญีกีฃีฎีซ ีดีกีฝีซีถ",
      aboutP1:"Ton21 (T21)ี ีฝีกีฐีดีกีถีกึีกีฏ ีฉีธีฒีกึีฏีดีกีดีข ีฉีธึีฅีถ TON ีขีฌีธีฏีนีฅีตีถีธึีดี ีถีฅึีทีถีนีพีกีฎ Bitcoin-ีซ 21M ีฃีกีฒีกึีกึีซึึ",
      aboutP2:"ีีบีกีฟีกีฏีจ ีฅึีฏีกึีกีชีกีดีฏีฅีฟ ีงีฏีธีฐีกีดีกีฏีกึีฃ ีงี ีญีกีฒีฅึ, airdrop-ีถีฅึ, ีดึึีกีถีกีฏีถีฅึ ึ ีฃีธึีฎีซึีถีฅึ TON ีฐีกีดีกีตีถึีซ ีฐีกีดีกึึ",
      aboutP3:"ิฑีตีฝ mini-app-ีซ ีพีซึีฟีธึีกีฌ ีดีกีตีถีซีถีฃีจ ึีฃีถีธึีด ีง ีกีบีกีฃีก ีบีกึีฃึีถีฅึีจ ีขีกีชีกีถีฅีฌ ีพีกีฒ ีกีปีกีฏึีธีฒีถีฅึีซ ีดีซีปึึ",
      howTitle:"ิปีถีนีบีฅีีฝ ีง ีกีทีญีกีฟีธึีด ีดีกีตีถีซีถีฃีจ",
      howP1:"ิฑีดีฅีถ 24 ีชีกีดีจ ีดีฅีฏ ีฏีกึีธีฒ ีฅึ ีฝีฅีฒีดีฅีฌ ยซีีกีตีถีซีถีฃยป ีฏีธีณีกีฏีจ ึ ีฝีฟีกีถีกีฌ +20 T21 ีพีซึีฟีธึีกีฌ ีดีถีกึีธึีคึ",
      howP2:"+5 T21 ีตีธึึีกึีกีถีนีตีธึึ ีฃีธีพีกีฆีคีซ ีฐีกีดีกึ, ึึีกีฏีกีถ ีดีซีถีนึ 10 ีกีถีฃีกีดึ ิฟีกึีธีฒ ีฅีถ ีฌีซีถีฅีฌ ีซึีกีฏีกีถ ีฃีธีพีกีฆีคีถีฅึ ีฏีกีด ีดีฅึ ีบึีธีดีธีถีฅึีจึ",
      howP3:"ิฑีบีกีฃีกีตีธึีด ีกีตีฝ ีดีถีกึีธึีคีถีฅึีจ ีฏีฏีกีบีพีฅีถ TON ีฐีกีฝึีฅีซ ีฐีฅีฟ ึ ีฏีกึีธีฒ ีฅีถ ึีฃีฟีกีฃีธึีฎีพีฅีฌ ีฑีฅีผึีธีพ airdrop-ีถีฅึีซ ีฐีกีดีกึึ",
      shareTitle:"ิฟีซีฝีพีซึ Ton21-ีธีพ",
      shareText:"ิฟีซีฝีพีซึ ีกีตีฝ ีดีกีตีถีซีถีฃีซ ีฐีกีพีฅีฌีพีกีฎีธีพ ีจีถีฏีฅึีถีฅึีซีค ีฐีฅีฟโค ีธึึีกีถ ีทีกีฟ ีกีฏีฟีซีพ ึีฃีฟีกีฟีฅึีฅึ, ีกีตีถึีกีถ ีธึีชีฅีฒ Ton21 ีงีฏีธีฐีกีดีกีฏีกึีฃึ",
      flashSaved:"โ ีีกีฝึีฅีถ ีบีกีฐีบีกีถีพีฅีฌ ีง",
      flashBadAddr:"โ๏ธ ีีธึีฟึีกีฃึีฅึ ีณีซีทีฟ TON ีฐีกีฝึีฅ (ีฝีฏีฝีพีธึีด ีง EQ ีฏีกีด UQ-ีธีพ)ึ",
      flashMine:"+20 T21 ีกีพีฅีฌีกึีพีฅึ ีีฅึ ีดีถีกึีธึีคีซีถึ",
      flashAd:"+5 T21ี ีฃีธีพีกีฆีคีซ ีคีซีฟีดีกีถ ีฐีกีดีกึึ",
      flashAdStart:"ิณีธีพีกีฆีคีจ ีดีฅีฏีถีกึีฏีฅึ โ ีฝีบีกีฝีฅึ 30 ีพีกีตึีฏีตีกีถโฆ",
      modalMineTitle:"ีึีตีก ีขีธีถีธึีฝ โ ีถีกีญ ีฃีธีพีกีฆีค",
      modalMineText:"ิดีซีฟีฅึ 30 ีพีกีตึีฏีตีกีถ ีฟึีธีฒีธึีฉีตีกีดีข ีฐีธีฌีธีพีกีฏีจ, ีกีบีก ีฏีฝีฟีกีถีกึ +20 T21ึ",
      modalAdTitle:"ิณีธีพีกีฆีคีกีตีซีถ ีขีธีถีธึีฝ",
      modalAdText:"+5 T21 ีฏีฝีฟีกีถีกึ 30 ีพีกีตึีฏีตีกีถ ีคีซีฟีธึีดีซึ ีฐีฅีฟีธึ",
      modalBtnClose:"ีีกีฏีฅีฌ",
      modalBtnGet:"ีีฟีกีถีกีฌ",
      needOnline:"ิตีฉีฅ share ีบีกีฟีธึีฐีกีถีจ ีนีขีกึีพีฅึ, ีบีกีฟีณีฅีถีฅึ ีฐีฒีธึีดีจึ"
    }
  };

  // ---------- state ----------
  var lang = localStorage.getItem("t21m_lang") || "ru";
  var balance = Number(localStorage.getItem("t21m_balance") || "0");
  var lastMine = Number(localStorage.getItem("t21m_lastMine") || "0");
  var wallet = localStorage.getItem("t21m_wallet") || "";
  var adsDate = localStorage.getItem("t21m_adsDate") || "";
  var adsUsed = Number(localStorage.getItem("t21m_adsUsed") || "0");

  // ---------- dom ----------
  var $ = function(id){return document.getElementById(id);};
  var langSel = $("langSel");
  var subtitle = $("subtitle");
  var mainTitle = $("mainTitle");
  var subNote = $("subNote");
  var balanceValue = $("balanceValue");
  var balLabel = $("balLabel");
  var rateLabel = $("rateLabel");
  var rateValue = $("rateValue");
  var adRateLabel = $("adRateLabel");
  var adRateValue = $("adRateValue");
  var virtualTag = $("virtualTag");
  var noPayoutYet = $("noPayoutYet");
  var mineBtn = $("mineBtn");
  var mineTimer = $("mineTimer");
  var adBtn = $("adBtn");
  var adInfo = $("adInfo");
  var walletTitle = $("walletTitle");
  var walletText1 = $("walletText1");
  var walletText2 = $("walletText2");
  var walletNote = $("walletNote");
  var walletInput = $("walletInput");
  var saveWalletBtn = $("saveWalletBtn");
  var aboutTitle = $("aboutTitle");
  var aboutP1 = $("aboutP1");
  var aboutP2 = $("aboutP2");
  var aboutP3 = $("aboutP3");
  var howTitle = $("howTitle");
  var howP1 = $("howP1");
  var howP2 = $("howP2");
  var howP3 = $("howP3");
  var shareTitle = $("shareTitle");
  var shareText = $("shareText");
  var shareBtn = $("shareBtn");
  var footerText = $("footerText");
  var flash = $("flash");

  var adModal = $("adModal");
  var adBar = $("adBar");
  var adCountdownText = $("adCountdownText");
  var adModalTitle = $("adModalTitle");
  var adModalText = $("adModalText");
  var adCloseBtn = $("adCloseBtn");
  var adClaimBtn = $("adClaimBtn");

  var adContext = null; // "mine" or "ad"
  var adTimer = null;
  var adLeft = 0;

  function todayKey(){
    return (new Date()).toISOString().slice(0,10);
  }

  function ensureAdDay(){
    var today = todayKey();
    if(adsDate !== today){
      adsDate = today;
      adsUsed = 0;
      localStorage.setItem("t21m_adsDate", adsDate);
      localStorage.setItem("t21m_adsUsed", String(adsUsed));
    }
  }

  function fmt2(n){return n<10?"0"+n:String(n);}

  function humanLeft(ms){
    if(ms <= 0) return "00:00:00";
    var s = Math.floor(ms/1000);
    var h = Math.floor(s/3600); s-=h*3600;
    var m = Math.floor(s/60); s-=m*60;
    return fmt2(h)+":"+fmt2(m)+":"+fmt2(s);
  }

  function flashMsg(text, ms){
    if(ms === undefined) ms = 1800;
    flash.textContent = text;
    flash.style.display = "block";
    setTimeout(function(){ flash.style.display="none"; }, ms);
  }

  function saveState(){
    localStorage.setItem("t21m_lang", lang);
    localStorage.setItem("t21m_balance", String(balance));
    localStorage.setItem("t21m_lastMine", String(lastMine));
    localStorage.setItem("t21m_wallet", wallet);
    localStorage.setItem("t21m_adsDate", adsDate);
    localStorage.setItem("t21m_adsUsed", String(adsUsed));
  }

  function isValidTon(a){
    a = (a || "").trim();
    return /^E[Q]/.test(a) || /^UQ/.test(a);
  }

  function applyLang(){
    var tr = T[lang] || T.en;
    document.documentElement.lang = lang === "cn" ? "zh" : lang;
    subtitle.textContent = tr.subtitle;
    mainTitle.textContent = tr.mainTitle;
    subNote.textContent = tr.subNote;
    balLabel.textContent = tr.balLabel;
    rateLabel.textContent = tr.rateLabel;
    rateValue.textContent = tr.rateValue;
    adRateLabel.textContent = tr.adRateLabel;
    adRateValue.textContent = tr.adRateValue;
    virtualTag.textContent = tr.virtualTag;
    noPayoutYet.textContent = tr.noPayoutYet;
    adBtn.textContent = tr.adBtn;
    walletTitle.textContent = tr.walletTitle;
    walletText1.textContent = tr.walletText1;
    walletText2.textContent = tr.walletText2;
    walletNote.textContent = tr.walletNote;
    aboutTitle.textContent = tr.aboutTitle;
    aboutP1.textContent = tr.aboutP1;
    aboutP2.textContent = tr.aboutP2;
    aboutP3.textContent = tr.aboutP3;
    howTitle.textContent = tr.howTitle;
    howP1.textContent = tr.howP1;
    howP2.textContent = tr.howP2;
    howP3.textContent = tr.howP3;
    shareTitle.textContent = tr.shareTitle;
    shareText.textContent = tr.shareText;
    shareBtn.textContent = "๐ " + tr.shareTitle;
    adCloseBtn.textContent = tr.modalBtnClose;
    adClaimBtn.textContent = tr.modalBtnGet;
    footerText.textContent = "Powered by Ton21 Project โข v0.2 virtual pre-mine โข Balance stored in browser (localStorage)";
    updateAdInfo();
    updateMineUI();
  }

  function updateBalanceUI(){
    balanceValue.textContent = balance.toFixed(2).replace(/\.00$/,"");
  }

  function updateAdInfo(){
    ensureAdDay();
    var tr = T[lang] || T.en;
    if(typeof tr.adInfo === "function"){
      adInfo.textContent = tr.adInfo(adsUsed);
    }else{
      adInfo.textContent = tr.adInfo;
    }
    if(adsUsed >= MAX_ADS_PER_DAY){
      adBtn.disabled = true;
    }else{
      adBtn.disabled = false;
    }
  }

  function updateMineUI(){
    var tr = T[lang] || T.en;
    var now = Date.now();
    var left = lastMine ? (lastMine + DAY_MS - now) : -1;
    if(!lastMine || left <= 0){
      mineBtn.disabled = false;
      mineBtn.textContent = tr.mineBtnReady;
      mineTimer.textContent = tr.mineReady;
    }else{
      mineBtn.disabled = true;
      mineBtn.textContent = tr.mineBtnReady;
      mineTimer.textContent = tr.mineNext + " " + humanLeft(left);
    }
  }

  setInterval(function(){
    updateMineUI();
  }, 1000);

  // ---------- fake ad flow ----------
  function startAdFlow(context){
    ensureAdDay();
    var tr = T[lang] || T.en;

    if(context === "ad" && adsUsed >= MAX_ADS_PER_DAY){
      flashMsg(tr.adLimit, 2000);
      return;
    }

    adContext = context;
    adBar.style.width = "0%";
    adCountdownText.textContent = "00:"+fmt2(AD_SECONDS);
    adCloseBtn.disabled = true;
    adClaimBtn.disabled = true;

    if(context === "mine"){
      adModalTitle.textContent = tr.modalMineTitle;
      adModalText.textContent = tr.modalMineText;
    }else{
      adModalTitle.textContent = tr.modalAdTitle;
      adModalText.textContent = tr.modalAdText;
    }

    adModal.style.display = "flex";
    flashMsg(tr.flashAdStart, 1600);

    var elapsed = 0;
    if(adTimer){ clearInterval(adTimer); }
    adTimer = setInterval(function(){
      elapsed += 1;
      var left = AD_SECONDS - elapsed;
      if(left < 0) left = 0;
      adCountdownText.textContent = "00:"+fmt2(left);
      var pct = Math.min(100, Math.floor(elapsed / AD_SECONDS * 100));
      adBar.style.width = pct + "%";

      if(elapsed >= AD_SECONDS){
        clearInterval(adTimer);
        adTimer = null;
        adClaimBtn.disabled = false;
        adCloseBtn.disabled = false;
      }
    }, 1000);
  }

  function closeAdModal(){
    adModal.style.display = "none";
    if(adTimer){ clearInterval(adTimer); adTimer = null; }
  }

  function finishAdReward(){
    var tr = T[lang] || T.en;
    closeAdModal();

    if(adContext === "mine"){
      // give daily reward
      var now = Date.now();
      var left = lastMine ? (lastMine + DAY_MS - now) : -1;
      if(lastMine && left > 0){
        updateMineUI();
        return;
      }
      lastMine = now;
      balance += DAILY_REWARD;
      saveState();
      updateBalanceUI();
      updateMineUI();
      flashMsg(tr.flashMine, 2200);
    }else if(adContext === "ad"){
      ensureAdDay();
      if(adsUsed >= MAX_ADS_PER_DAY){
        updateAdInfo();
        return;
      }
      adsUsed += 1;
      balance += AD_REWARD;
      saveState();
      updateBalanceUI();
      updateAdInfo();
      flashMsg(tr.flashAd, 2000);
    }
    adContext = null;
  }

  // ---------- events ----------
  langSel.value = lang;
  langSel.addEventListener("change", function(){
    lang = langSel.value;
    saveState();
    applyLang();
  });

  walletInput.value = wallet;

  saveWalletBtn.addEventListener("click", function(){
    var tr = T[lang] || T.en;
    var v = walletInput.value.trim();
    if(!isValidTon(v)){
      flashMsg(tr.flashBadAddr, 2200);
      return;
    }
    wallet = v;
    saveState();
    flashMsg(tr.flashSaved, 1800);
  });

  mineBtn.addEventListener("click", function(){
    var tr = T[lang] || T.en;
    var now = Date.now();
    var left = lastMine ? (lastMine + DAY_MS - now) : -1;
    if(lastMine && left > 0){
      updateMineUI();
      return;
    }
    startAdFlow("mine");
  });

  adBtn.addEventListener("click", function(){
    startAdFlow("ad");
  });

  adCloseBtn.addEventListener("click", function(){
    closeAdModal();
  });

  adClaimBtn.addEventListener("click", function(){
    finishAdReward();
  });

  shareBtn.addEventListener("click", function(){
    var tr = T[lang] || T.en;
    var url = window.location.href;
    var text = "T21 Mining โ virtual pre-mine like Pi Network. Join early: " + url;
    if(navigator.share){
      navigator.share({title:"T21 Play Zone โ Mining", text:text, url:url}).catch(function(){});
    }else if(navigator.clipboard && navigator.clipboard.writeText){
      navigator.clipboard.writeText(text).then(function(){
        flashMsg("Link copied to clipboard", 1600);
      }).catch(function(){
        flashMsg(tr.needOnline, 1800);
      });
    }else{
      flashMsg(tr.needOnline, 1800);
    }
  });

  // ---------- init ----------
  ensureAdDay();
  updateBalanceUI();
  applyLang();
</script>
</body>
</html>

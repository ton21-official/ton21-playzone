<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>T21 Mining</title>
  <meta name="color-scheme" content="dark light" />
  <link rel="icon" href="https://raw.githubusercontent.com/ton21-official/ton21_official/main/logo.png" />

  <style>
    :root{
      --bg:#050815;
      --panel:#0c1222;
      --panel2:#111a2b;
      --accent:#4fc3ff;
      --accent2:#7cf7d8;
      --txt:#e9f0ff;
      --muted:#9fb2d0;
      --danger:#ff6b81;
      --gold:#ffd76a;
    }
    *{box-sizing:border-box;}
    html,body{height:100%;}
    body{
      margin:0;
      font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
      background:
        radial-gradient(1200px 700px at 50% -10%, #1b2232 0%, #050815 60%),
        radial-gradient(900px 500px at 120% 110%, #18243a 0%, transparent 60%);
      color:var(--txt);
    }
    .wrap{
      max-width:420px;
      margin:0 auto;
      padding:16px 16px 32px;
    }
    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin-bottom:14px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
    }
    .logo{
      width:32px;height:32px;
      border-radius:50%;
      background:#0b1426;
      display:flex;align-items:center;justify-content:center;
      border:1px solid #1c2d4a;
      font-size:18px;
    }
    .brand-title{
      display:flex;
      flex-direction:column;
    }
    .brand-title span:first-child{
      font-weight:700;
      font-size:16px;
    }
    .brand-title span:last-child{
      font-size:12px;
      color:var(--muted);
    }
    .lang{
      font-size:13px;
      color:var(--muted);
      display:flex;
      gap:6px;
      align-items:center;
    }
    .lang select{
      background:#0b1426;
      border-radius:999px;
      padding:4px 10px;
      border:1px solid #223553;
      color:var(--txt);
      font-size:12px;
    }

    .card{
      background:linear-gradient(145deg,#10182a,#0b1220);
      border-radius:18px;
      border:1px solid #1f2d47;
      padding:16px 14px 14px;
      box-shadow:0 16px 40px rgba(0,0,0,.45);
      margin-bottom:12px;
    }
    .balance-main{
      text-align:center;
      margin-bottom:10px;
    }
    .label{
      font-size:12px;
      color:var(--muted);
    }
    .main-balance{
      margin-top:4px;
      font-size:26px;
      font-weight:700;
    }
    .stats-row{
      display:flex;
      gap:8px;
      margin-top:10px;
    }
    .stat{
      flex:1;
      border-radius:12px;
      padding:10px;
      background:#0b1424;
      border:1px solid #182640;
      font-size:13px;
    }
    .stat-title{
      color:var(--muted);
      font-size:11px;
      margin-bottom:4px;
    }
    .stat-value{
      font-weight:600;
      font-size:14px;
    }
    .stat-tag{
      margin-top:2px;
      font-size:11px;
      color:var(--accent2);
    }

    .btn{
      width:100%;
      padding:12px 14px;
      border-radius:999px;
      border:none;
      margin-top:10px;
      font-weight:600;
      font-size:15px;
      cursor:pointer;
      display:flex;
      justify-content:center;
      align-items:center;
      gap:6px;
      transition:transform .06s ease, box-shadow .06s ease, opacity .06s ease;
    }
    .btn-primary{
      background:linear-gradient(135deg,#4fc3ff,#7cf7d8);
      color:#021320;
      box-shadow:0 6px 16px rgba(79,195,255,.4);
    }
    .btn-secondary{
      background:transparent;
      color:var(--accent);
      border:1px solid #30466e;
    }
    .btn-warning{
      background:linear-gradient(135deg,#ffd76a,#ff9a5e);
      color:#2b1305;
      box-shadow:0 6px 16px rgba(255,173,94,.4);
    }
    .btn:active{transform:translateY(1px);box-shadow:none;}
    .btn:disabled{
      opacity:.45;
      cursor:not-allowed;
      box-shadow:none;
    }

    .timer{
      margin-top:6px;
      text-align:center;
      font-size:12px;
      color:var(--muted);
    }

    .section{
      margin-top:18px;
      padding:12px 12px 10px;
      border-radius:16px;
      background:#0b1324;
      border:1px solid #1b2842;
    }
    .section-title{
      font-size:14px;
      font-weight:600;
      margin-bottom:6px;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }
    .section-title span small{
      font-weight:400;
      color:var(--muted);
      font-size:11px;
    }
    .section p{
      margin:4px 0 0;
      font-size:12px;
      color:var(--muted);
    }

    .wallet-box{
      margin-top:8px;
      border-radius:12px;
      background:#050b17;
      border:1px dashed #233553;
      padding:10px;
      font-size:12px;
      color:var(--muted);
    }
    .wallet-box input{
      margin-top:6px;
      width:100%;
      padding:8px 10px;
      border-radius:10px;
      border:1px solid #223553;
      background:#050b17;
      color:var(--txt);
      font-size:13px;
    }

    .footer{
      margin-top:20px;
      font-size:11px;
      color:var(--muted);
      text-align:center;
    }

    /* flash */
    .flash{
      position:fixed;
      top:14px;
      left:50%;
      transform:translateX(-50%);
      background:#101a30;
      border-radius:999px;
      padding:8px 14px;
      border:1px solid #2b4473;
      font-size:12px;
      color:#d8ebff;
      display:none;
      z-index:30;
    }

    /* simple modal "Ad" */
    .modal-backdrop{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.6);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:40;
    }
    .modal{
      width:min(360px,92vw);
      border-radius:16px;
      background:#0b1424;
      padding:14px 16px 12px;
      border:1px solid #203357;
    }
    .modal h3{
      margin:2px 0 4px;
      font-size:15px;
    }
    .modal p{
      margin:4px 0 10px;
      font-size:12px;
      color:var(--muted);
    }
    .progress{
      height:8px;
      border-radius:999px;
      background:#050b16;
      border:1px solid #223553;
      overflow:hidden;
    }
    .progress-inner{
      height:100%;
      width:0%;
      background:linear-gradient(90deg,#4fc3ff,#7cf7d8);
    }
    .modal-actions{
      display:flex;
      gap:8px;
      margin-top:10px;
    }
    .modal-actions .btn{
      margin-top:0;
      flex:1;
    }
  </style>
</head>
<body>
<div class="flash" id="flash"></div>

<div class="modal-backdrop" id="adModal">
  <div class="modal">
    <h3 id="adTitle">Sponsored video</h3>
    <p id="adText">Watch the promo to get your T21 reward.</p>
    <div class="progress"><div class="progress-inner" id="adBar"></div></div>
    <div class="modal-actions">
      <button class="btn btn-secondary" id="adSkip" disabled>Skip</button>
      <button class="btn btn-primary" id="adOk" disabled>Get reward</button>
    </div>
  </div>
</div>

<div class="wrap">
  <header>
    <div class="brand">
      <div class="logo">T</div>
      <div class="brand-title">
        <span>Ton21 Mining</span>
        <span>Virtual pre-mine like Pi Network</span>
      </div>
    </div>
    <div class="lang">
      <span>üåê</span>
      <select id="langSel">
        <option value="en">EN</option>
        <option value="ru" selected>RU</option>
      </select>
    </div>
  </header>

  <div class="card">
    <div class="balance-main">
      <div class="label" id="labelBalance">–í–∞—à –±–∞–ª–∞–Ω—Å</div>
      <div class="main-balance"><span id="balance">0</span> T21</div>
    </div>

    <div class="stats-row">
      <div class="stat">
        <div class="stat-title" id="labelMiningPower">–ú–∞–π–Ω–∏–Ω–≥-—Å–∫–æ—Ä–æ—Å—Ç—å</div>
        <div class="stat-value">+20 T21 / day</div>
        <div class="stat-tag" id="labelDailyMining">Daily mining</div>
      </div>
      <div class="stat">
        <div class="stat-title" id="labelBoost">–†–µ–∫–ª–∞–º–Ω—ã–π –±—É—Å—Ç</div>
        <div class="stat-value">+5 T21 / ad</div>
        <div class="stat-tag" id="labelBoostHint">up to many times</div>
      </div>
    </div>

    <button class="btn btn-primary" id="dailyBtn">Start / Claim 20 T21</button>
    <div class="timer" id="dailyTimer">Next daily claim: ready</div>

    <button class="btn btn-warning" id="ad5Btn">üé¨ Watch ad (+5 T21)</button>
    <div class="timer" id="ad5Timer">Ad reward: ready</div>
  </div>

  <div class="section">
    <div class="section-title">
      <span id="labelWalletTitle">Your TON address (for future payouts)</span>
    </div>
    <p id="labelWalletHelp">–¢–æ–ª—å–∫–æ –¥–ª—è –∑–∞–ø–∏—Å–∏, –≤—ã–ø–ª–∞—Ç—ã —Å–µ–π—á–∞—Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ. –ü–æ–∑–∂–µ —Ç—ã –≤—Ä—É—á–Ω—É—é –ø–µ—Ä–µ–≤–µ–¥—ë—à—å T21 —Ç–µ–º, –∫—Ç–æ –∏–≥—Ä–∞–ª.</p>
    <div class="wallet-box">
      <div id="labelWalletText">–°–æ—Ö—Ä–∞–Ω–∏–º –∞–¥—Ä–µ—Å, —á—Ç–æ–±—ã –∑–Ω–∞—Ç—å –∫–æ–º—É —Å–∫–æ–ª—å–∫–æ –Ω–∞—á–∏—Å–ª–µ–Ω–æ.</div>
      <input id="walletInput" placeholder="EQ... –∏–ª–∏ UQ..." />
      <button class="btn btn-secondary" id="walletSave" style="margin-top:8px;">Save address</button>
    </div>
  </div>

  <div class="section">
    <div class="section-title">
      <span id="labelInfoTitle">How it works</span>
    </div>
    <p id="labelInfoText">
      –≠—Ç–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –º–∞–π–Ω–∏–Ω–≥ T21, –∫–∞–∫ Pi Network. –ë–∞–ª–∞–Ω—Å —Ö—Ä–∞–Ω–∏—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–≤ –±—É–¥—É—â–µ–º).
      –†–µ–∞–ª—å–Ω—ã—Ö –≤—ã–ø–ª–∞—Ç –ø–æ–∫–∞ –Ω–µ—Ç ‚Äî –∫–æ–≥–¥–∞ T21 –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤, —Ç—ã –≤—Ä—É—á–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∏—à—å –Ω–∞–≥—Ä–∞–¥—ã –∞–∫—Ç–∏–≤–Ω—ã–º –∏–≥—Ä–æ–∫–∞–º.
    </p>
  </div>

  <div class="footer">
    Powered by <b>Ton21 Project</b> ‚Ä¢ v0.1 virtual pre-mine
  </div>
</div>

<script>
  // ======= CONFIG =======
  const DAILY_REWARD = 20;          // –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å
  const DAILY_COOLDOWN = 24 * 60 * 60 * 1000; // 24 —á–∞—Å–∞
  const AD5_REWARD = 5;             // –Ω–∞–≥—Ä–∞–¥–∞ –∑–∞ —Ä–µ–∫–ª–∞–º—É
  const AD5_COOLDOWN = 30 * 60 * 1000;        // 30 –º–∏–Ω—É—Ç

  // ======= STATE (localStorage) =======
  let balance = Number(localStorage.getItem("t21_mining_balance") || "0");
  let lastDaily = Number(localStorage.getItem("t21_last_daily") || "0");
  let lastAd5   = Number(localStorage.getItem("t21_last_ad5") || "0");
  let wallet    = localStorage.getItem("t21_wallet") || "";
  let lang      = localStorage.getItem("t21_lang") || "ru";

  // ======= TEXTS (EN/RU) =======
  const texts = {
    en:{
      balance:"Your balance",
      miningPowerTitle:"Mining power",
      dailyMining:"Daily mining",
      boostTitle:"Ad boost",
      boostHint:"+5 per ad",
      dailyReady:"Next daily claim: ready",
      dailyWait:(s)=>`Next daily claim in: ${s}`,
      ad5Ready:"Ad reward: ready",
      ad5Wait:(s)=>`Ad reward in: ${s}`,
      dailyBtn:"Start / Claim 20 T21",
      ad5Btn:"üé¨ Watch ad (+5 T21)",
      walletTitle:"Your TON address (for future payouts)",
      walletHelp:"Record address only. Rewards are virtual now. Later you will send real T21 to active miners.",
      walletText:"We save your address to know who earned how much.",
      walletSaved:"Address saved",
      walletBad:"Looks like not a TON address",
      infoTitle:"How it works",
      infoText:"This is a virtual T21 mining like Pi Network. Balance is stored locally (and later on the server). No real payouts yet.",
      cantDaily:"Daily reward is not ready yet.",
      cantAd5:"Ad reward is on cooldown.",
      adTitle:"Sponsored video",
      adText:"Watch short promo to unlock T21 reward.",
      adSkip:"Skip",
      adGet:"Get reward",
      adDone:"+5 T21 added",
      dailyDone:"+20 T21 added"
    },
    ru:{
      balance:"–í–∞—à –±–∞–ª–∞–Ω—Å",
      miningPowerTitle:"–ú–∞–π–Ω–∏–Ω–≥-—Å–∫–æ—Ä–æ—Å—Ç—å",
      dailyMining:"–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –º–∞–π–Ω–∏–Ω–≥",
      boostTitle:"–†–µ–∫–ª–∞–º–Ω—ã–π –±—É—Å—Ç",
      boostHint:"+5 –∑–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä",
      dailyReady:"–°–ª–µ–¥—É—é—â–∏–π –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å: –¥–æ—Å—Ç—É–ø–µ–Ω",
      dailyWait:(s)=>`–°–ª–µ–¥—É—é—â–∏–π –±–æ–Ω—É—Å —á–µ—Ä–µ–∑: ${s}`,
      ad5Ready:"–†–µ–∫–ª–∞–º–Ω—ã–π –±–æ–Ω—É—Å: –¥–æ—Å—Ç—É–ø–µ–Ω",
      ad5Wait:(s)=>`–†–µ–∫–ª–∞–º–Ω—ã–π –±–æ–Ω—É—Å —á–µ—Ä–µ–∑: ${s}`,
      dailyBtn:"–ó–∞–ø—É—Å—Ç–∏—Ç—å / –ü–æ–ª—É—á–∏—Ç—å 20 T21",
      ad5Btn:"üé¨ –°–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∫–ª–∞–º—É (+5 T21)",
      walletTitle:"–í–∞—à TON-–∞–¥—Ä–µ—Å (–¥–ª—è –±—É–¥—É—â–∏—Ö –≤—ã–ø–ª–∞—Ç)",
      walletHelp:"–°–µ–π—á–∞—Å –≤—Å—ë –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ. –ü–æ–∑–∂–µ —Ç—ã –≤—Ä—É—á–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∏—à—å T21 –∞–∫—Ç–∏–≤–Ω—ã–º –º–∞–π–Ω–µ—Ä–∞–º.",
      walletText:"–°–æ—Ö—Ä–∞–Ω–∏–º –∞–¥—Ä–µ—Å, —á—Ç–æ–±—ã –ø–æ–Ω–∏–º–∞—Ç—å, –∫–æ–º—É —Å–∫–æ–ª—å–∫–æ –Ω–∞—á–∏—Å–ª–µ–Ω–æ.",
      walletSaved:"–ê–¥—Ä–µ—Å —Å–æ—Ö—Ä–∞–Ω—ë–Ω",
      walletBad:"–ü–æ—Ö–æ–∂–µ, —ç—Ç–æ –Ω–µ TON-–∞–¥—Ä–µ—Å",
      infoTitle:"–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç",
      infoText:"–≠—Ç–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –º–∞–π–Ω–∏–Ω–≥ T21 –∫–∞–∫ Pi Network. –ë–∞–ª–∞–Ω—Å —Ö—Ä–∞–Ω–∏—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ (–∏ –ø–æ–∑–∂–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ). –ü–æ–∫–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –≤—ã–ø–ª–∞—Ç –Ω–µ—Ç.",
      cantDaily:"–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å –ø–æ–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.",
      cantAd5:"–†–µ–∫–ª–∞–º–Ω—ã–π –±–æ–Ω—É—Å –µ—â—ë –Ω–∞ –ø–µ—Ä–µ–∑–∞—Ä—è–¥–∫–µ.",
      adTitle:"–†–µ–∫–ª–∞–º–Ω—ã–π —Ä–æ–ª–∏–∫",
      adText:"–ü–æ—Å–º–æ—Ç—Ä–∏ –∫–æ—Ä–æ—Ç–∫–∏–π —Ä–æ–ª–∏–∫, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å T21.",
      adSkip:"–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å",
      adGet:"–ü–æ–ª—É—á–∏—Ç—å –Ω–∞–≥—Ä–∞–¥—É",
      adDone:"+5 T21 –Ω–∞—á–∏—Å–ª–µ–Ω–æ",
      dailyDone:"+20 T21 –Ω–∞—á–∏—Å–ª–µ–Ω–æ"
    }
  };

  // ======= DOM =======
  const $ = s => document.querySelector(s);

  const elBalance = $("#balance");
  const elLabelBalance = $("#labelBalance");
  const elMiningPowerTitle = $("#labelMiningPower");
  const elDailyMining = $("#labelDailyMining");
  const elBoostTitle = $("#labelBoost");
  const elBoostHint = $("#labelBoostHint");
  const elDailyBtn = $("#dailyBtn");
  const elDailyTimer = $("#dailyTimer");
  const elAd5Btn = $("#ad5Btn");
  const elAd5Timer = $("#ad5Timer");
  const elLangSel = $("#langSel");
  const elWalletTitle = $("#labelWalletTitle");
  const elWalletHelp = $("#labelWalletHelp");
  const elWalletText = $("#labelWalletText");
  const elWalletInput = $("#walletInput");
  const elWalletSave = $("#walletSave");
  const elInfoTitle = $("#labelInfoTitle");
  const elInfoText = $("#labelInfoText");
  const elFlash = $("#flash");

  const adModal = $("#adModal");
  const adBar = $("#adBar");
  const adTitle = $("#adTitle");
  const adText = $("#adText");
  const adSkip = $("#adSkip");
  const adOk = $("#adOk");

  // ======= HELPERS =======
  function flash(msg, ms=1600){
    elFlash.textContent = msg;
    elFlash.style.display = "block";
    setTimeout(()=>{ elFlash.style.display = "none"; }, ms);
  }

  function formatRemain(ms){
    if(ms < 0) ms = 0;
    const sec = Math.floor(ms/1000);
    const h = Math.floor(sec/3600);
    const m = Math.floor((sec%3600)/60);
    const s = sec%60;
    const hh = String(h).padStart(2,"0");
    const mm = String(m).padStart(2,"0");
    const ss = String(s).padStart(2,"0");
    return `${hh}:${mm}:${ss}`;
  }

  function isTonAddress(a){
    return /^E[Q]/.test(a) || /^UQ/.test(a);
  }

  function saveState(){
    localStorage.setItem("t21_mining_balance", String(balance));
    localStorage.setItem("t21_last_daily", String(lastDaily));
    localStorage.setItem("t21_last_ad5", String(lastAd5));
    localStorage.setItem("t21_wallet", wallet);
    localStorage.setItem("t21_lang", lang);
  }

  // ======= UI UPDATE =======
  function updateTexts(){
    const tr = texts[lang];
    elLabelBalance.textContent = tr.balance;
    elMiningPowerTitle.textContent = tr.miningPowerTitle;
    elDailyMining.textContent = tr.dailyMining;
    elBoostTitle.textContent = tr.boostTitle;
    elBoostHint.textContent = tr.boostHint;
    elDailyBtn.textContent = tr.dailyBtn;
    elAd5Btn.textContent = tr.ad5Btn;
    elWalletTitle.textContent = tr.walletTitle;
    elWalletHelp.textContent = tr.walletHelp;
    elWalletText.textContent = tr.walletText;
    elInfoTitle.textContent = tr.infoTitle;
    elInfoText.textContent = tr.infoText;
    adTitle.textContent = tr.adTitle;
    adText.textContent = tr.adText;
    adSkip.textContent = tr.adSkip;
    adOk.textContent = tr.adGet;
  }

  function updateUI(){
    const tr = texts[lang];
    elBalance.textContent = balance.toFixed(4).replace(/0+$/,"").replace(/\.$/,"");
    elWalletInput.value = wallet;

    const now = Date.now();
    const dailyRemain = DAILY_COOLDOWN - (now - lastDaily);
    if(dailyRemain <= 0){
      elDailyBtn.disabled = false;
      elDailyTimer.textContent = tr.dailyReady;
    }else{
      elDailyBtn.disabled = true;
      elDailyTimer.textContent = tr.dailyWait(formatRemain(dailyRemain));
    }

    const adRemain = AD5_COOLDOWN - (now - lastAd5);
    if(adRemain <= 0){
      elAd5Btn.disabled = false;
      elAd5Timer.textContent = tr.ad5Ready;
    }else{
      elAd5Btn.disabled = true;
      elAd5Timer.textContent = tr.ad5Wait(formatRemain(adRemain));
    }
  }

  // ======= EVENTS =======
  elLangSel.value = lang;
  elLangSel.onchange = ()=>{
    lang = elLangSel.value;
    saveState();
    updateTexts();
    updateUI();
  };

  elDailyBtn.onclick = ()=>{
    const tr = texts[lang];
    const now = Date.now();
    const remain = DAILY_COOLDOWN - (now - lastDaily);
    if(remain > 0){
      flash(tr.cantDaily);
      return;
    }
    lastDaily = now;
    balance += DAILY_REWARD;
    saveState();
    updateUI();
    flash(tr.dailyDone);
  };

  function showAdModal(onDone){
    const tr = texts[lang];
    adTitle.textContent = tr.adTitle;
    adText.textContent = tr.adText;
    adSkip.textContent = tr.adSkip;
    adOk.textContent = tr.adGet;

    adModal.style.display = "flex";
    adBar.style.width = "0%";
    adSkip.disabled = true;
    adOk.disabled = true;

    let t = 0;
    const total = 10; // 10 —Å–µ–∫—É–Ω–¥ "—Ä–æ–ª–∏–∫"
    const timer = setInterval(()=>{
      t++;
      adBar.style.width = (t/total*100) + "%";
      if(t >= 4) adSkip.disabled = false;   // skip –ø–æ—Å–ª–µ 4 —Å–µ–∫
      if(t >= total){
        clearInterval(timer);
        adOk.disabled = false;
      }
    },1000);

    adSkip.onclick = ()=>{
      clearInterval(timer);
      adModal.style.display = "none";
      adSkip.onclick = null;
      adOk.onclick = null;
    };
    adOk.onclick = ()=>{
      clearInterval(timer);
      adModal.style.display = "none";
      adSkip.onclick = null;
      adOk.onclick = null;
      onDone();
    };
  }

  elAd5Btn.onclick = ()=>{
    const tr = texts[lang];
    const now = Date.now();
    const remain = AD5_COOLDOWN - (now - lastAd5);
    if(remain > 0){
      flash(tr.cantAd5);
      return;
    }
    showAdModal(()=>{
      lastAd5 = Date.now();
      balance += AD5_REWARD;
      saveState();
      updateUI();
      flash(tr.adDone);
    });
  };

  elWalletSave.onclick = ()=>{
    const tr = texts[lang];
    const v = elWalletInput.value.trim();
    if(v && !isTonAddress(v)){
      flash(tr.walletBad);
      return;
    }
    wallet = v;
    saveState();
    flash(tr.walletSaved);
  };

  // ======= INIT =======
  updateTexts();
  updateUI();
  setInterval(updateUI, 1000); // –æ–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–π–º–µ—Ä—ã —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É
</script>
</body>
</html>